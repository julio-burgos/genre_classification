(this["webpackJsonpcreate-react-app-example"]=this["webpackJsonpcreate-react-app-example"]||[]).push([[0],{118:function(e,t,n){e.exports=n.p+"static/media/upc-logo.9e023929.svg"},129:function(e,t,n){e.exports=n(242)},233:function(e,t){},234:function(e,t){},235:function(e,t){},236:function(e,t){},237:function(e,t){},238:function(e,t){},242:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(12),c=n.n(o),l=n(55),s=n(38),i=n(19),u=n.n(i),p=n(34),m=n(48),d=n(109),g=n(281),f=n(70),h=n(283),b=n(107),O=n(112),E=n.n(O),y=n(284),v=n(13),j=22050,k=30*j;function x(e){return w.apply(this,arguments)}function w(){return(w=Object(p.a)(u.a.mark((function e(t){var n,a,r,o,c,l,s,i,p;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target,a=new FileReader,r=n.files[0],e.next=5,new Promise((function(e,t){a.onerror=function(){a.abort(),t(new DOMException("Problem parsing input file."))},a.onload=function(t){return e(t.target.result)},a.readAsArrayBuffer(r)}));case 5:return o=e.sent,c=new AudioContext({sampleRate:j}),e.next=9,c.decodeAudioData(o);case 9:return l=e.sent,s=v.j(l.getChannelData(0).slice(0,k)),i=v.j(l.getChannelData(1).slice(0,k)),p=s.addStrict(i).div(2).as1D(),c.close(),e.abrupt("return",p);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var C=Object(d.a)((function(e){return{content:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.primary},uploadbutton:{marginTop:e.spacing(1)},selectmodel:{minWidth:"10em"},circularprogress:{color:"#428EC6",marginTop:e.spacing(12)}}}));function S(){var e=C(),t=r.a.useState(""),n=Object(m.a)(t,2),a=(n[0],n[1],r.a.useState(!1)),o=Object(m.a)(a,2),c=o[0],l=o[1],s=r.a.useState(),i=Object(m.a)(s,2),d=i[0],O=i[1],v=function(){var e=Object(p.a)(u.a.mark((function e(t){var n,a,r,o,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!1),n=document.getElementById("upload"),a=n.files[0].name,e.next=5,x(t);case 5:return r=e.sent.arraySync(),e.next=8,fetch("/getgenre",{method:"POST",body:JSON.stringify({mono:r}),headers:new Headers({"Content-Type":"application/json",Accept:"application/json"})});case 8:return o=e.sent,e.next=11,o.json();case 11:c=e.sent,console.log(c),s=c.predictions.map((function(e){return 100*e})),console.log(c.predictions),console.log(s),O({labels:["blues","classical","country","disco","hiphop","jazz","metal","pop","reggae","rock"],datasets:[{label:a,backgroundColor:"#ff6c850f",borderColor:"#ff6c85ff",borderWidth:1,hoverBackgroundColor:"#ff6c852f",hoverBorderColor:"#ff6c85ff",data:s,maxBarThickness:40}]}),l(!0);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(g.a,{container:!0,className:e.content},r.a.createElement(g.a,{item:!0,xs:12},r.a.createElement(f.a,{variant:"h4"},"Genre Classification")),r.a.createElement(g.a,{item:!0,xs:12},r.a.createElement(h.a,{variant:"contained",component:"label",className:e.uploadbutton},"Upload Song",r.a.createElement(E.a,null),r.a.createElement("input",{type:"file",id:"upload",style:{display:"none"},onChange:v}))),r.a.createElement(g.a,{item:!0,xs:12},c?r.a.createElement(b.a,{data:d,width:100,height:40,options:{scales:{xAxes:[{ticks:{suggestedMin:0,suggestedMax:100}}]},legend:!1,maintainAspectRatio:!0}}):r.a.createElement(y.a,{className:e.circularprogress,size:150,thickness:3})))}var P=n(8),T=n(22),A=n(44),D=n(24),N=n(67),B=n(68),R=n(69),F=n(296),I=n(297),z=n(287),W=n(288),G=n(289),J=n(6),_=n(113),L=n.n(_),M=n(114),H=n.n(M),U=n(299);function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(n,!0).forEach((function(t){Object(P.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var K=r.a.createElement(L.a,{fontSize:"small"}),Q=r.a.createElement(H.a,{fontSize:"small"}),V=function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(N.a)(this,Object(B.a)(t).call(this,e))).setOptions=function(e){var t=n.state.open;n.setState({options:e.slice(),loading:t&&0===e.length})},n.setOpen=function(e){n.setState({open:e})},n.setselectsong=function(e,t){if(!t.selected){var a=n.state.selectedsongs.slice();a.push(e),n.setState({selectedsongs:Object(T.a)(a)})}},n.handleChange=function(){var e=Object(p.a)(u.a.mark((function e(t){var a,r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setOpen(!1),console.log(t.target.value),null!=(a=t.target.value)&&""!=a.trim()||n.setOptions([]),e.next=6,fetch("/searchsongs?q="+a,{method:"GET"});case 6:return r=e.sent,e.next=9,r.json();case 9:o=e.sent,console.log(o),n.setOptions(o),n.setOpen(!0);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleSelectedSong=function(e){console.log(e.target.value)},n.handleClick=function(){var e=Object(p.a)(u.a.mark((function e(t){var a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/getRecommendations",{method:"POST",body:JSON.stringify({selectedsongs:n.state.selectedsongs.map((function(e){return e}))}),headers:new Headers({"Content-Type":"application/json",Accept:"application/json"})});case 2:return a=e.sent,e.next=5,a.json();case 5:r=e.sent,console.log(r),n.setState({recomendedSongs:r.slice()});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={selectedsongs:[],open:!1,options:[],loading:!0,recomendedSongs:[]},n}return Object(R.a)(t,e),Object(D.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(I.a,{disableCloseOnSelect:!0,multiple:!0,id:"song-selector",style:{marginTop:"2rem"},open:this.state.open,clearOnEscape:!0,onOpen:function(){e.setOpen(!0)},onClose:function(){e.setOpen(!1)},getOptionLabel:function(e){return e.name},onChange:this.handleSelectedSong,getOptionSelected:function(e,t){return e.id===t.id},renderOption:function(t,n){return r.a.createElement("span",{onClick:function(a){return e.setselectsong(t,n)},style:{width:"100%"}},r.a.createElement(U.a,{icon:K,checkedIcon:Q,style:{marginRight:8},checked:n.selected}),t.name+" by "+t.artist)},options:this.state.options,loading:this.state.loading,freeSolo:!0,disableClearable:!0,autoSelect:!0,renderInput:function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,Object.assign({},t,{onChange:e.handleChange,label:"Select Track",fullWidth:!0,variant:"outlined",InputProps:$({},t.InputProps,{endAdornment:r.a.createElement(r.a.Fragment,null,e.state.loading?r.a.createElement(y.a,{color:"inherit",size:20}):null,t.InputProps.endAdornment)})})))}}),r.a.createElement(h.a,{color:"primary",variant:"outlined",onClick:this.handleClick,style:{marginTop:"-3.5em",marginRight:"-9em",float:"right"}},"Recommend"),r.a.createElement(z.a,{component:"nav",className:t.root},this.state.recomendedSongs.map((function(e,t){return r.a.createElement(W.a,{key:t},r.a.createElement("a",{target:"_blank",href:e.track_url},r.a.createElement(G.a,{primary:e.track_title,secondary:e.artist_name})))}))))}}]),t}(a.Component),X=Object(J.a)((function(e){return{root:{width:"100%",marginTop:"1rem",backgroundColor:e.palette.background.paper}}}))(V),Y=function(e){return console.log(e),r.a.createElement(r.a.Fragment,null,r.a.createElement(s.c,null,r.a.createElement(s.a,{key:0,exact:!0,path:"/",component:S}),r.a.createElement(s.a,{key:1,exact:!0,path:"/recomendsong",component:X})))},Z=n(290),ee=n(291),te=function(e){function t(){return Object(A.a)(this,t),Object(N.a)(this,Object(B.a)(t).apply(this,arguments))}return Object(R.a)(t,e),Object(D.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Z.a,null),r.a.createElement(ee.a,{maxWidth:"md",fixed:!0},r.a.createElement("main",null,this.props.children)))}}]),t}(a.Component),ne=Object(J.a)((function(e){return{}}))(te),ae=n(293),re=n(298),oe=n(292),ce=n(119),le=n.n(ce),se=[{label:"Genre Classification",path:"/",component:S},{label:"Song Recommender",path:"/recomendsong",component:X}],ie=n(294),ue=n(295),pe=n(120),me=n.n(pe),de=n(118),ge=n.n(de),fe=Object(d.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper},toolbarButtons:{marginLeft:"auto"},indicator:{backgroundColor:"#428EC6"},logo:{width:50,height:50}}}));function he(){var e=fe(),t=r.a.useState(0),n=Object(m.a)(t,2),a=n[0],o=n[1],c=[r.a.createElement(le.a,null),r.a.createElement(me.a,null)],s=se.map((function(e,t){return r.a.createElement(oe.a,{icon:c[t],label:e.label,component:l.b,value:t,key:t,to:e.path})}));return console.log(s),r.a.createElement("div",{className:e.root},r.a.createElement(ae.a,{position:"static",className:e.indicator},r.a.createElement(ie.a,null,r.a.createElement(ue.a,{className:e.logo,alt:"UPCLogo",src:ge.a}))),r.a.createElement(re.a,{value:a,"aria-label":"simple tabs example",centered:!0,onChange:function(e,t){o(t),console.log(t)}},s))}var be=function(){return r.a.createElement(a.Fragment,null,r.a.createElement(he,null),r.a.createElement(ne,null,r.a.createElement(Y,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(l.a,{basename:"/"},r.a.createElement(be,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[129,1,2]]]);
//# sourceMappingURL=main.3fb0cd42.chunk.js.map